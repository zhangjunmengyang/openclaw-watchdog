# openclaw-watchdog default configuration
# Copy to ~/.openclaw/watchdog/config.conf and customize.
#
# All values shown are defaults. Uncomment and modify as needed.

# === Gateway Health ===

# Health check endpoint
# HEALTH_CHECK_URL="http://127.0.0.1:18789/healthz"

# Main loop interval (seconds)
# CHECK_INTERVAL=15

# Exponential backoff for health failures
# BACKOFF_INITIAL=30    # First backoff wait
# BACKOFF_MAX=300       # Max backoff (5 minutes) before forcing restart
# BACKOFF_MULTIPLIER=2  # Backoff multiplier (30 → 60 → 120 → 240 → restart)

# Minimum time between restarts (seconds)
# COOLDOWN=120

# Diagnostic freeze flag file: if present, watchdog will not restart gateway
# DIAG_FREEZE_FLAG="$HOME/.openclaw/watchdog/diagnostic.freeze"

# Restart budget (avoid restart storms)
# RESTART_WINDOW_SEC=900
# RESTART_MAX_IN_WINDOW=3

# Network connectivity target
# PING_TARGET="8.8.8.8"
# PING_TIMEOUT=3

# Time to wait after network recovery for VPN/TUN to stabilize
# TUN_SETTLE=8

# Discord API check (used as network + service reachability indicator)
# DISCORD_CHECK_URL="https://discord.com/api/v10/gateway"

# === Proxy (optional, leave blank to disable) ===

# Local proxy URL (e.g., Clash, V2Ray)
# PROXY_URL="http://127.0.0.1:7897"

# Target to check via proxy (just needs TCP connect, not valid auth)
# LLM_API_CHECK_URL="https://api.anthropic.com"

# Check proxy every N ticks (N × CHECK_INTERVAL seconds)
# PROXY_CHECK_INTERVAL=4

# Consecutive proxy failures before restart
# PROXY_FAIL_THRESHOLD=3

# === Agent Heartbeat ===

# How often to check agent heartbeats (seconds)
# HEARTBEAT_CHECK_INTERVAL=600  # 10 minutes

# Staleness threshold (minutes) — alert if agent hasn't heartbeated in this long
# HEARTBEAT_THRESHOLD_MIN=120  # 2 hours

# Space-separated list of "name:workspace_path" pairs
# AGENT_WORKSPACES="main:$HOME/.openclaw/workspace sentinel:$HOME/.openclaw/workspace-sentinel scholar:$HOME/.openclaw/workspace-scholar"

# === Config Safeguard ===

# Path to openclaw.json
# CONFIG_PATH="$HOME/.openclaw/openclaw.json"

# Time (seconds) to wait before auto-confirming a config change
# ROLLBACK_TIMEOUT=300  # 5 minutes

# Number of config snapshots to keep
# SNAPSHOT_RETENTION=20

# === Config Backup (git-based) ===

# How often to check for changes and commit (seconds)
# BACKUP_INTERVAL=3600  # 1 hour

# Maximum git commits to retain
# BACKUP_RETENTION=30

# Additional files/dirs to track (space-separated "name:path" pairs)
# BACKUP_TRACKED_DIR="scripts:$HOME/.openclaw/scripts profiles:$HOME/.openclaw/workspace/profiles"

# === Gateway Service ===

# LaunchAgent label (macOS) or systemd unit name (Linux)
# GATEWAY_LAUNCHD_LABEL="ai.openclaw.gateway"

# === Logging ===

# Max log lines before auto-trim
# MAX_LOG_LINES=5000
